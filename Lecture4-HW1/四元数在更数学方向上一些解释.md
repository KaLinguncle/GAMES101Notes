为什么实际旋转角度是四元数里面的角度的两倍？有什么数学上的原因吗？ - 匡世珉的回答 - 知乎
https://www.zhihu.com/question/41485992/answer/93762542



### 1. 复数表示的旋转

​	 1.1 每一个 $\R^2$ 关于原点的旋转都可以用一个复数 $z_\theta = \cos\theta + i\cos\theta$ 表示。

​		  $z_\theta(x+iy) = (cos\theta+i\sin\theta)(x+iy)\\=x\cos\theta-y\sin\theta+ i(x\sin\theta +y\cos\theta)$

​			

​			复数与矩阵的关系,旋转矩阵可以使用这种方式表示，前面的矩阵代表1，后面的矩阵代表i：

​			$R_{\theta} = \cos\theta\begin{pmatrix} 1 \ 0 \\ 0 \ 1\end{pmatrix} + \sin\theta\begin{pmatrix} 0 \ -1 \\ 1 \ 0\end{pmatrix}$

​			可以把每个复数都表示为矩阵形式：

​			$\begin{pmatrix} a \ \ -b \\ b \ \ a\end{pmatrix} = a1 +bi \ \  a,b \in \R	$



### 2.四元数的定义

​	1.1 一种四元数的矩阵表示		$\begin{pmatrix} a+di \ \ -b-ci \\ b-ci \ \ a-di\end{pmatrix} = a1 + bi +cj +dk, \\ 其中, \\ 1 = \begin{pmatrix} 1 \ 0 \\ 0 \ 1\end{pmatrix} , i = \begin{pmatrix} 0 \ -j \\ i \ 0\end{pmatrix} , j= \begin{pmatrix} 0 \ -i \\ -i \ 0\end{pmatrix} ,k=\begin{pmatrix} i \ 0 \\ 0 \ -i\end{pmatrix}$

​	

​		定义$|q|^2= \det{q}=a^2 + b^2 +c^2 + d^2$, 所以 $|q|$就是$(a,b,c,d) \in \R^4$到原点的距离。

​		正如单位长度的复数对应了圆（一维球面$\mathbb{S}^1$ (一个由复数表示的实轴两端连接起来的圆环)）一样，单位长度的四元数满足 $a^2 + b^2 +c^2 + d^2 =1$,对应了三维球面$\mathbb{S}^3$



#### 等距同构

​		对于单位长度的复数 $u$来说，不需要计算三角函数就可以知道它对应了旋转，对于任意 $v,w$两个复数，考虑他们的距离在乘 $u$前后的变化：

​		$|uv-uw| = |u(v-w)| = |u||v-w| = |v-w|$

​		可以看出，他们的距离没有变化，乘u 是一个 等距同构。



#### 虚四元数乘积

​		虚四元数对应了四维空间，而要研究的是三维空间的旋转，所以需要观察四元数的一个子空间： 虚/纯四元数。

​		$u = u_1i +u_2j +u_3k , \ v= v_1i+v_2j+v_3k \\ uv = -(u_1v_1+u_2v_2+u_3v_3)+(u_2v_3-u_3v_2)i - (u_1v_3-u_3v_1)j+(u_1v_2-u_2v_1)k\\ uv = -u \cdot v + u \times v$

​		前面的点积是实数，只有当 u和v垂直时， uv才在 $\R i+\R j + \R k$中

​		

#### 使用四元数的共轭性质来将旋转空间限定在虚四元数子空间中。

​		将一个单位四元数写为实部与虚部的和。

​		$t = \cos\theta+u\sin\theta$ 其中 u是$\R i+\R j + \R k$中的单位向量。

​		我们希望把$\R i+\R j + \R k$作为我们旋转的空间，但之前已经发现，对于$q \in \R i+\R j + \R k$ , qt可能不在 $\R i+\R j + \R k$之中 （乘积可能会有一个实部）。

​		共轭， $t^{-1}qt一定在$$\R i+\R j + \R k$ 之中。

​	

​		在$\mathbb{H}$（哈密顿空间）中，乘t 与乘t^-1 都是$\mathbb{H}$上的双射（因为可逆），所以$q\rightarrow t^{-1}qt 也是 \mathbb H上的双射$

​		由于对于任意实四元数r都有$t^{-1}rt =r$,即t的共轭作用把$\R$映射到其自身，也会把$\R i+\R j + \R k$ 映射到自身，也就是说，t的共轭作用是 $\R i+\R j + \R k$上的双射，解决了qt乘积会跑到 $\R i+\R j + \R k$ 之外的问题。



​		我们想要证明的是，给定$t=\cos\theta+u\sin\theta$，其中$u$是$\mathbb{R}\mathrm{i}+\mathbb{R}\mathrm{j}+\mathbb{R}\mathrm{k}$中的单位向量，那么$t$ 的共轭作用将把$\mathbb{R}\mathrm{i}+\mathbb{R}\mathrm{j}+\mathbb{R}\mathrm{k}$绕着$u$所在的轴$\mathbb{R}u$旋转$2\theta$

​		证明分两步，首先我们证明$\mathbb{R}u$是旋转轴。这也就意味着，我们要证明的所有实数倍的向量在$t$的共轭作用下保持原位：

​		$t^{-1}ut=(\cos\theta-u\sin\theta)u(\cos\theta+u\sin\theta) \\ =(u\cos\theta-u^2\sin\theta)(\cos\theta+u\sin\theta)\\ =(u\cos\theta+\sin\theta)(\cos\theta+u\sin\theta)  （因为u^2=-1）\\ =u(\cos^2\theta+\sin^2\theta)+\sin\theta\cos\theta+u^2\sin\theta\cos\theta \\ =u （因为u^2=-1）$

​		接下来，在$\mathbb{R}\mathrm{i}+\mathbb{R}\mathrm{j}+\mathbb{R}\mathrm{k}$中选取垂直于$u$的单位向量$v$，令$w = u\times v$于是， ${u,v,w}$是$\mathbb{R}\mathrm{i}+\mathbb{R}\mathrm{j}+\mathbb{R}\mathrm{k}$的一组规范正交基。

​		为了证明确实旋转了$2\theta$，我们只需要证明$t^{-1}vt=v\cos2\theta-w\sin2\theta$以及

$t^{-1}wt=v\sin2\theta+w\cos2\theta$就好了。两者证明类似，这里只证明前者：

​		$t^{-1}vt=(\cos\theta-u\sin\theta)v(\cos\theta+u\sin\theta) \\ =(v\cos\theta-uv\sin\theta)(\cos\theta+u\sin\theta) \\ =v\cos^2\theta-uv\sin\theta\cos\theta+vu\sin\theta\cos\theta-uvu\sin^2\theta \\ =v\cos^2\theta-2uv\sin\theta\cos\theta+u^2v\sin^2\theta  （因为vu=-uv）\\ =v(\cos^2\theta-\sin^2\theta)-2w\sin\theta\cos\theta （因为 u^2=-1,~uv=w ）\\=v\cos2\theta-w\sin2\theta $

​		于是，对于$\R^3$中的每一个旋转，给定旋转轴$u$以及旋转角$\alpha$,都有一个单位长度的四元数 $t=\cos(\alpha/2)+u\sin(\alpha/2)$的共轭作用与之对应。

​		